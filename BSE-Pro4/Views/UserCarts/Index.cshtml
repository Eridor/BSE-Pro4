@model IEnumerable<BSE_Pro4.Models.Cart>

@{
    ViewBag.Title = "Koszyk";
    double sum = 0;
} 

<h2>Zawartość koszyka</h2>


<table class="table">
    <tr>
        <th>
            Nazwa produktu
        </th> 
        <th>
            Ilość
        </th>
        <th>
            Wartość
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.ProductItem.Name)
            </td>       
            <td>
                @Html.ActionLink("-", "Sub", new { id = item.CartId }, new { @class = "fullWidth btn btn-danger" })
                @Html.DisplayFor(modelItem => item.Quantity)
                @Html.ActionLink("+", "Add", new { id = item.CartId }, new { @class = "fullWidth btn btn-success" })
            </td>
            <td>
                @((item.Quantity * (item.ProductItem.Cost * (1 + item.ProductItem.Tax.Value))).ToString("C2"))
            </td>
            <td> 
                @Html.ActionLink("Usuń z koszyka", "Delete", new { id = item.CartId }, new { @class = "fullWidth btn btn-danger" })
            </td>
        </tr>
    }
    <tr>
        <th>
           
        </th>
        <th>
            Suma
        </th>
        <th>
            @ViewBag.CartSum.ToString("C2")
        </th>
        <th></th>
    </tr>
</table>
@if (Model.Count() != 0)
{

    <p>@Html.ActionLink("Złóż zamówienie  »", "Create", "UserTransactions", null, new {@class = "fullWidth btn btn-primary"})</p>
} 